/* === Personaggio (Hello Kitty) === */
.h-char{
  position: fixed;
  right: 0;
  bottom: 12px;
  width: 240px;
  z-index: 9999;
  opacity: 0;
  transition: opacity 300ms ease;
  pointer-events: auto;
}
.h-char.show{ opacity: 1; }
.h-char video{ display:block; width:100%; height:auto; }

/* ====== Fumetti ====== */
.h-bubble{
  position: absolute;
  right: calc(90% + 12px);
  bottom: -35px;
  width: 200px;
  height: 72px;
  background: #fff;
  color: #000;
  border: 1px solid #000;
  border-radius: 12px;
  padding: 8px 10px 6px;
  font: 300 13px/1.25 sans-serif;
  box-shadow: 3px 4px 11px 0px #A3A3A3;
  opacity: 0;
  transform: translateY(6px);
  transition: opacity .18s ease, transform .18s ease;
  pointer-events: auto;
  overflow: visible;
}
.h-bubble.show{ opacity:1; transform:translateY(0); }
.h-bubble.hide{ opacity:0; transform:translateY(6px); pointer-events:none; }

/* Becco */
.h-bubble::before, .h-bubble::after{
  content:"";
  position:absolute;
  bottom:14px;
  right:-16px;
  width:0; height:0;
}
.h-bubble::before{
  border-top:12px solid transparent;
  border-bottom:10px solid transparent;
  border-left:18px solid #000;
  z-index:1;
}
.h-bubble::after{
  right:-15px;
  border-top:11px solid transparent;
  border-bottom:11px solid transparent;
  border-left:17px solid #fff;
  z-index:2;
}
.h-bubble-text{ display:block; white-space:pre-wrap; letter-spacing:.2px; max-height: 90px; overflow:hidden; }
.h-type-caret{ display:none !important; }
.h-btn{
  display:none; margin-top:6px; padding:6px 5px; border:1px solid #3e3e3e; border-radius:8px;
  font-weight:400; line-height:1; background-image: linear-gradient(#ffdef0 0%, #fdb9df 25%, #fcdafd 100%);
}
.h-btn.show{ display:inline-block; }
.h-btn:active{ transform:translateY(1px); box-shadow: 0 2px rgba(0,0,0,.25), inset 0 1px 0 rgba(255,255,255,.4); }
.h-bubble.h-bubble--info{ height:72px; }
.h-bubble.h-bubble--ehi{ height:86px; }

/* ==== LANG SWITCH ==== */
#lang-switch {
  position: fixed; top: 12px; right: 12px; z-index: 10;
  display: none; opacity: 0; gap: 6px; padding: 6px; border-radius: 10px;
  color: #ff00ea; background: #ff00e614; border: 1px solid #ff00e638; backdrop-filter: blur(4px);
  transition: opacity .25s ease;
}
#lang-switch.show { display: flex; opacity: .65; }
#lang-switch:hover { opacity: .85; }
#lang-switch .lang{
  min-width: 38px; height: 28px; padding: 0 8px;
  background: #ff00e10f; border: 1px solid #ff00fb47; border-radius: 6px; color: #ff00ee;
  font-size: 12px; font-weight: 700; letter-spacing: .08em; text-transform: uppercase;
  cursor: pointer; transition: background .15s ease, border-color .15s ease, transform .15s ease;
}
#lang-switch .lang:hover{ transform: translateY(-1px); background:#ff00f75c; border-color:#ff00f7ae; }
#lang-switch .lang.active{ background:#ff00f732; border-color:#ff00f78c; }

/* ==== Wallpaper: fade-in lento ==== */
.h-wallpaper{
  position: fixed; inset: 0;
  background-position: center; background-size: cover; background-repeat: no-repeat;
  opacity: 0; pointer-events: none; z-index: 0;
  transition: opacity 2.2s ease-in-out;
}

/* ==== Pannelli cliccabili ==== */
.p2-image { cursor: pointer; }

/* Effetto “cartella che si apre” all’apparizione */
@keyframes folderOpen {
  0%   { transform: perspective(900px) rotateX(14deg) scale(0.72); opacity: 0; }
  60%  { transform: perspective(900px) rotateX(2deg)  scale(1.02); opacity: 1; }
  100% { transform: perspective(900px) rotateX(0deg)  scale(1);    opacity: 1; }
}
.p2-image--appearing{
  transform-origin: center center;
  animation: folderOpen 260ms cubic-bezier(.2,.8,.2,1) both;
  will-change: transform, opacity;
}

/* Ombre “a L” (solo sotto + sinistra) */
.p2-shadow-b, .p2-shadow-l { position: fixed; pointer-events: none; opacity: 0; transition: opacity 180ms ease; }
.p2-shadow-b{
  height: 26px;
  background: radial-gradient(ellipse at center, rgba(0,0,0,0.18) 0%, rgba(0,0,0,0.14) 40%, rgba(0,0,0,0.00) 70%);
}
.p2-shadow-l{
  width: 18px; height: 65%;
  background: linear-gradient(90deg, rgba(0,0,0,0.18), rgba(0,0,0,0.04) 70%, rgba(0,0,0,0) 100%);
  border-radius: 0 10px 10px 0;
}

/* Video glitch dei pannelli (finale) */
.p2-glitch{
  position: fixed;
  width: 360px; /* allineato alla nuova misura */
  height: auto;
  opacity: 0;
  transition: opacity 220ms ease;
  pointer-events: none;
  z-index: 11;
}
